function cl(a){console.log(a)}var entuURL="https://ylikool.entu.ee/api/";angular.module("ylikoolApp",["ngRoute"]).config(["$routeProvider","$sceDelegateProvider",function(a,b){a.when("/ajatelg",{templateUrl:"pages/history.html",controller:"listCtrl"}).when("/konelejad",{templateUrl:"pages/authors.html",controller:"listCtrl"}).when("/:id",{templateUrl:"pages/lecture.html",controller:"lectureCtrl"}).otherwise({redirectTo:"/ajatelg"}),b.resourceUrlWhitelist(["self","http://heli.er.ee/**"])}]).controller("mainCtrl",["$rootScope","$scope","$location",function(a,b,c){a.url=c.path().replace("/",""),b.nightTipNr=Math.floor(3*Math.random()+1),b.pages=[{url:"ajatelg",title:"Ajatelg"},{url:"konelejad",title:"K\xf5nelejad"}],b.nightToggle=function(){b.nightMode=!b.nightMode,b.hideNightTip=!0}}]).controller("listCtrl",["$rootScope","$scope","$http","$filter","$location",function(b,c,d,e,f){b.url=f.path().replace("/",""),b.lectures||b.years||b.authors?(c.lectures=b.lectures,c.years=b.years,c.authors=b.authors):d({method:"GET",url:entuURL+"get_entity_list",params:{entity_definition_keyname:"loeng",only_public:!0,full_info:!0}}).success(function(d){b.lectures=[],b.years=[],b.authors=[];for(i in d){try{var f=d[i].properties.kuupaev.values[0].value}catch(g){var f=""}try{var h=parseInt(e("date")(d[i].properties.kuupaev.values[0].value,"yyyy"))}catch(g){var h=""}try{var j=d[i].properties.nimi.values[0].value}catch(g){var j=""}try{var k=d[i].properties.esitaja.values}catch(g){var k=[]}try{var l=d[i].properties.link.values[0].value}catch(g){var l=""}-1==c.years.indexOf(h)&&(b.years.push(h),b.years=b.years.sort(),b.years=b.years.reverse());var m=[];for(a in k){var n=k[a].value;m.push(n),-1==b.authors.indexOf(n)&&(b.authors.push(n),b.authors=b.authors.sort())}b.lectures.push({id:d[i].id,date:f,year:h,title:j,authors:m,link:l})}c.lectures=b.lectures,c.years=b.years,c.authors=b.authors})}]).controller("lectureCtrl",["$rootScope","$scope","$routeParams",function(a,b,c){a.url=c.id;for(i in a.lectures)if(a.lectures[i].id==c.id){b.lecture=a.lectures[i];break}b.palyAudio=function(b){a.current_lecture=b}}]);
